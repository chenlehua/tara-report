import{getReports as f,getDownloadUrl as y}from"./index-fc_ROXrg.js";import{_ as k,r as g,m as w,a as n,o as r,d as t,h as c,i as p,e as i,j as x,g as b,F as B,f as C,t as o,u as M}from"./index-BYRN50ky.js";const V={class:"reports-page animate-fadeIn"},N={class:"page-header"},R={key:0,class:"loading-state"},z={key:1,class:"empty-state"},A={key:2,class:"reports-grid"},D={class:"report-header"},j={class:"badge badge-success"},H={class:"report-name"},L={class:"report-project"},S={class:"report-meta"},T={class:"meta-item"},F={class:"report-stats"},I={class:"stat"},E={class:"stat-value"},U={class:"stat"},$={class:"stat-value"},q={class:"stat"},G={class:"stat-value"},J={class:"report-actions"},K=["href"],O={__name:"ReportsView",setup(P){const v=g(!0),d=g([]);w(async()=>{try{const e=await f();e.success&&(d.value=e.reports)}catch(e){console.error("获取报告列表失败:",e)}finally{v.value=!1}});function m(e){return new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}return(e,s)=>{const l=x("router-link");return r(),n("div",V,[t("div",N,[s[1]||(s[1]=t("div",{class:"header-left"},[t("h1",null,"报告中心"),t("p",{class:"page-desc"},"管理和查看所有已生成的TARA分析报告")],-1)),c(l,{to:"/generator",class:"btn btn-primary"},{default:p(()=>[...s[0]||(s[0]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1),i(" 新建报告 ",-1)])]),_:1})]),v.value?(r(),n("div",R,[...s[2]||(s[2]=[t("svg",{class:"animate-spin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[t("circle",{cx:"12",cy:"12",r:"10","stroke-opacity":"0.25"}),t("path",{d:"M12 2a10 10 0 0110 10","stroke-linecap":"round"})],-1),t("span",null,"加载中...",-1)])])):d.value.length===0?(r(),n("div",z,[s[4]||(s[4]=b('<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-dca1046c><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z" data-v-dca1046c></path><path d="M14 2v6h6" data-v-dca1046c></path><path d="M12 18v-6" data-v-dca1046c></path><path d="M9 15l3-3 3 3" data-v-dca1046c></path></svg><h3 data-v-dca1046c>暂无报告</h3><p data-v-dca1046c>开始创建您的第一份TARA分析报告</p>',3)),c(l,{to:"/generator",class:"btn btn-primary"},{default:p(()=>[...s[3]||(s[3]=[i(" 立即创建 ",-1)])]),_:1})])):(r(),n("div",A,[(r(!0),n(B,null,C(d.value,a=>{var u,_,h;return r(),n("div",{key:a.id,class:"card report-card"},[t("div",D,[s[5]||(s[5]=t("div",{class:"report-icon blue"},[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[t("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),t("path",{d:"M14 2v6h6"})])],-1)),t("span",j,o(a.status==="completed"?"已完成":a.status),1)]),t("h3",H,o(a.name),1),t("p",L,o(a.project_name),1),t("div",S,[t("div",T,[s[6]||(s[6]=t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("polyline",{points:"12 6 12 12 16 14"})],-1)),i(" "+o(m(a.created_at)),1)])]),t("div",F,[t("div",I,[t("span",E,o(((u=a.statistics)==null?void 0:u.assets_count)||0),1),s[7]||(s[7]=t("span",{class:"stat-label"},"资产",-1))]),t("div",U,[t("span",$,o(((_=a.statistics)==null?void 0:_.threats_count)||0),1),s[8]||(s[8]=t("span",{class:"stat-label"},"威胁",-1))]),t("div",q,[t("span",G,o(((h=a.statistics)==null?void 0:h.high_risk_count)||0),1),s[9]||(s[9]=t("span",{class:"stat-label"},"高风险",-1))])]),t("div",J,[c(l,{to:`/reports/${a.id}`,class:"btn btn-secondary"},{default:p(()=>[...s[10]||(s[10]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[t("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),t("circle",{cx:"12",cy:"12",r:"3"})],-1),i(" 预览 ",-1)])]),_:1},8,["to"]),t("a",{href:M(y)(a.id),class:"btn btn-primary",download:""},[...s[11]||(s[11]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[t("path",{d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"}),t("polyline",{points:"7,10 12,15 17,10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),i(" 下载 ",-1)])],8,K)])])}),128))]))])}}},X=k(O,[["__scopeId","data-v-dca1046c"]]);export{X as default};
